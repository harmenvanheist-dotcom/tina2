<!DOCTYPE html><html lang="nl"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Tina 2</title>
<style>html,body,#chat{height:100%}body{margin:0;display:flex;align-items:center;justify-content:center}</style>
</head><body>
<div id="chat">Ladenâ€¦</div>
<script>
function init(){(async()=>{
  try{
    const r=await fetch("/.netlify/functions/chatkit-session",{method:"POST"});
    if(!r.ok) throw new Error("session "+r.status);
    const {client_secret}=await r.json();
    if(!window.chatkit) throw new Error("chatkit niet geladen");
    const control=await window.chatkit.createControl({
      api:{ getClientSecret:async()=>client_secret },
      audio:{ input:true, output:true }
    });
    window.chatkit.mount(document.getElementById("chat"),{ control, widget:"mini-chat-audio" });
  }catch(e){document.getElementById("chat").innerText="Fout: "+e;}
})();}
// laad script en wacht tot onload
const s=document.createElement("script");
s.src="https://cdn.platform.openai.com/deployments/chatkit/chatkit.js";
s.async=true; s.onload=init; s.onerror=()=>{document.getElementById("chat").innerText="ChatKit script faalde."};
document.head.appendChild(s);
</script>
</body></html>
